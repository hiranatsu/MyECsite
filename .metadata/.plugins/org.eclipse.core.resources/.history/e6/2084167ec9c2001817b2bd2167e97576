set names utf8;
set foreign_key_checks = 0;
drop database if exists myecsite;

create database if not exists myecsite;
use myecsite;

create table item_category(
id int primary key not null comment "ID",
category_id int not null unique comment "カテゴリID",
category_name varchar(20) not null unique comment "カテゴリ名",
category_description varchar(100) comment "カテゴリ詳細",
insert_date datetime not null comment "登録日",
update_date datetime comment "更新日"
)
default charset=utf8
comment="カテゴリマスタテーブル"
;
insert into m_category values
(1,1,"全てのカテゴリー","煎茶、玉露、抹茶、その他全てのカテゴリーが対象となります",now(), null),
(2,2,"煎茶","煎茶・深蒸し煎茶に関するカテゴリーが対象となります",now(),null),
(3,3,"抹茶","抹茶に関するカテゴリーが対象となります",now(),null),
(4,4,"その他の茶","玄米茶・ほうじ茶・昆布茶などに関するカテゴリーが対象となります",now(),null);

drop table if exists user_info;
create table user_info(
id int primary key not null auto_increment comment "ID",
user_id varchar(16) unique not null comment "ユーザーID",
password varchar(16) not null comment "パスワード",
family_name varchar(32) not null comment "姓",
first_name varchar(32) not null comment "名",
family_name_kana varchar(32) not null comment "姓かな",
first_name_kana varchar(32) not null comment "名かな",
sex tinyint not null default 0 comment "姓別",
email varchar(32) not null comment "メールアドレス",
status tinyint not null default 0 comment "ステータス",
logined tinyint not null default 0 comment "ログインフラグ",
regist_date datetime not null comment "登録日",
update_date datetime not null comment "更新日"
)
default charset=utf8
comment="会員情報テーブル"
;
insert into user_info values
(1,"guest01","guest01","ゲスト用","ゲストユーザー01","げすとよう","げすとゆーざー01",0,"guest01@gmail.com",0,0,now(),now()),
(2,"guest02","guest02","ゲスト用","ゲストユーザー02","げすとよう","げすとゆーざー02",0,"guest02@gmail.com",0,0,now(),now()),
(3,"admin01","admin01","管理用","管理者ユーザー01","かんりよう","かんりしゃゆーざー01",0,"admin01@gmail.com",1,0,now(),now()),
(3,"admin02","admin02","管理用","管理者ユーザー02","かんりよう","かんりしゃゆーざー02",0,"admin02@gmail.com",1,0,now(),now());

drop table if exists item_info;
create table item_info(
id int primary key not null auto_increment comment "ID",
item_id int unique not null comment "商品ID",
item_name varchar(100) unique not null comment "商品名",
item_name_kana varchar(100) not null comment "商品名かな",
item_description varchar(255) not null comment "商品詳細",
category_id int not null not null comment "カテゴリID",
gram int comment "g(グラム)"
price int comment "価格",
image_file_path varchar(100) comment "画像ファイルパス",
image_file_name varchar(50) comment "画像ファイル名",
release_date datetime not null comment "発売年月",
release_company varchar(50) comment "発売会社",
producing_area varchar(50) comment "生産地"
status tinyint not null default 0 comment "ステータス",
regist_date datetime not null comment "登録日",
update_date datetime comment "更新日",
foreign key(category_id) references m_category(category_id)
)
default charset=utf8
comment="商品情報テーブル"
;
insert into item_info values
( 1, 1,"煎茶１","せんちゃ１","煎茶１の商品詳細",2,50,400,"./images","sample.jpg",2000/1/1,"御茶乃株式会社","静岡県",0,now(),now()),
( 2, 2,"本２","ほん２","本２の商品詳細",2,200,"./images","sample.jpg",now(),"発売会社",0,now(),now()),

drop table if exists user_buy_item_transaction;
create table user_buy_item_transaction(
id int not null primary key auto_increment,
item_transaction_id int,
total_price int,
total_count int,
user_master_id varchar(16),
pay varchar(30),
insert_date datetime,
delete_date datetime
);

INSERT INTO item_info_transaction(item_name, item_price, item_stock) VALUES ("煎茶 50g","400","5"),("玉露 50g","1500","5"),("ほうじ茶 50g","1000","5"),("玄米茶 50g","500","5"),("ごぼう茶 50g","1000","5"),("昆布茶 50g","400","5");
INSERT INTO login_user_transaction(login_id, login_pass, user_name) VALUES ("test01", "123", "test");
© 2018 GitHub, Inc.